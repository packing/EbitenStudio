<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EbitenStudio</title>
  <link rel="stylesheet" href="styles/app.css">
</head>
<body>
  <div class="app-container">
    <!-- 顶部工具栏 -->
    <header class="toolbar">
      <div class="toolbar-section">
        <h1 class="app-title">EbitenStudio</h1>
      </div>
      <div class="toolbar-section toolbar-center">
        <button class="tool-btn" id="btn-create-button" data-type="button">
          <span>🔘</span> 按钮
        </button>
        <button class="tool-btn" id="btn-create-label" data-type="label">
          <span>📝</span> 标签
        </button>
        <button class="tool-btn" id="btn-create-textinput" data-type="textinput">
          <span>📄</span> 输入框
        </button>
        <button class="tool-btn" id="btn-create-image" data-type="image">
          <span>🖼️</span> 图像
        </button>
        <button class="tool-btn" id="btn-create-listview" data-type="listview">
          <span>📋</span> 列表视图
        </button>
        <button class="tool-btn" id="btn-create-gridview" data-type="gridview">
          <span>▦</span> 网格视图
        </button>
        <button class="tool-btn" id="btn-create-tableview" data-type="tableview">
          <span>📋</span> 表格视图
        </button>
        <button class="tool-btn" id="btn-create-combobox" data-type="combobox">
          <span>🔽</span> 下拉框
        </button>
        <button class="tool-btn" id="btn-create-slider" data-type="slider">
          <span>🎚️</span> 滑动条
        </button>
        <button class="tool-btn" id="btn-create-checkbox" data-type="checkbox">
          <span>☑️</span> 复选框
        </button>
        <button class="tool-btn" id="btn-create-radiobutton" data-type="radiobutton">
          <span>🔘</span> 单选按钮
        </button>
        <button class="tool-btn" id="btn-create-panel" data-type="panel">
          <span>📦</span> 面板
        </button>
        <div class="separator"></div>
        <button class="tool-btn" id="btn-delete">
          <span>🗑️</span> 删除
        </button>
      </div>
      <div class="toolbar-section">
        <button class="tool-btn primary" id="btn-preview">
          <span>▶️</span> 预览
        </button>
        <button class="tool-btn" id="btn-export">
          <span>💾</span> 导出
        </button>
      </div>
    </header>

    <div class="main-content">
      <!-- 左侧面板 -->
      <aside class="sidebar sidebar-left">
        <div class="resize-handle"></div>
        <!-- 组件层级 -->
        <div class="panel-section">
          <h3>组件层级</h3>
          <div id="widget-tree" class="widget-list">
            <p class="empty-hint">暂无组件</p>
          </div>
        </div>
        
        <!-- 资源管理 -->
        <div class="panel-section">
          <div class="section-header">
            <h3>资源管理</h3>
            <div class="section-toolbar">
              <button class="icon-btn" id="btn-add-image" title="添加图像">➕</button>
              <button class="icon-btn" id="btn-add-font" title="添加字体" style="display:none;">➕</button>
              <button class="icon-btn" id="btn-delete-resource" title="删除资源">🗑️</button>
            </div>
          </div>
          
          <div class="resource-tabs">
            <button class="resource-tab active" data-type="images">图像</button>
            <button class="resource-tab" data-type="fonts">字体</button>
          </div>
          
          <div id="resource-list" class="resource-list">
            <p class="empty-hint">暂无资源</p>
          </div>
        </div>
      </aside>

      <!-- 中间画布区域 -->
      <main class="canvas-area" id="canvas-container">
        <!-- 画布边框指示器 -->
        <div id="canvas-border"></div>
        <!-- HTML5 Canvas 直接渲染 -->
        <canvas id="main-canvas"></canvas>
      </main>

      <!-- 右侧属性面板 -->
      <aside class="sidebar sidebar-right">
        <div class="resize-handle"></div>
        <h3>属性</h3>
        <div id="properties-panel">
          <p class="empty-hint">未选择组件</p>
        </div>
      </aside>
    </div>
  </div>

  <!-- 加载提示 overlay -->
  <div id="loading-overlay" style="display: none;">
    <div class="loading-spinner"></div>
    <div class="loading-text">正在处理...</div>
  </div>

  <!-- 不再需要 API 连接和 WASM -->
  <script src="js/widgets/base.js"></script>
  <script src="js/widgets/types.js"></script>
  <script src="js/rgba-picker.js"></script>
  <script src="js/canvas-renderer.js"></script>
  <script src="js/script-integration.js"></script>
  <script src="js/properties.js"></script>
  <script src="js/toolbar.js"></script>
  <script src="js/resource-manager.js"></script>
  <script src="js/sidebar-resizer.js"></script>
  <script src="js/resource-packer.js"></script>
  <script src="js/preview.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
