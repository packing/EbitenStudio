# Phase 6 快速测试指南

## 测试步骤

### 1. 启动EbitenStudio

```bash
cd h:\e_code_backup\github\repo\EbitenStudio\frontend
npm start
```

### 2. 打开脚本编辑器

有两种方式：

**方式1: 使用菜单**
- 点击菜单: `Tools -> Script Editor`

**方式2: 使用快捷键**
- 按下: `Ctrl + E`

### 3. 测试功能清单

#### ✅ 基本功能
- [ ] 脚本编辑器窗口成功打开
- [ ] 左侧显示脚本列表（应该看到button1.ts）
- [ ] Monaco编辑器加载成功（深色主题）
- [ ] 状态栏显示（Errors: 0, Warnings: 0, Widget: None）

#### ✅ 打开脚本
1. 点击左侧的 `button1.ts`
2. 检查:
   - [ ] 编辑器显示脚本内容
   - [ ] 语法高亮正常
   - [ ] 状态栏显示 `Widget: button1`

#### ✅ 智能提示测试
1. 在编辑器中定位到 `onClick` 函数内
2. 输入 `self.` 并等待
3. 应该看到:
   - [ ] 弹出智能提示菜单
   - [ ] 显示UIButton的方法（setText, getText, setTextColor等）
   - [ ] 有方法文档说明

4. 输入 `RootElement.` 并等待
5. 应该看到:
   - [ ] getElementById 方法
   - [ ] getByType 方法

6. 输入 `console.` 并等待
7. 应该看到:
   - [ ] log, error, warn, info 方法

#### ✅ 错误检查测试
1. 在脚本末尾添加错误代码:
   ```typescript
   const test: string = 123;  // 类型错误
   ```
2. 检查:
   - [ ] 编辑器中出现红色波浪线
   - [ ] 状态栏显示 `Errors: 1`
   - [ ] 鼠标悬停在错误上显示错误信息

3. 删除错误代码
4. 检查:
   - [ ] 红色波浪线消失
   - [ ] 状态栏显示 `Errors: 0`

#### ✅ 代码格式化测试
1. 将代码格式打乱（删除缩进、空格等）
2. 点击底部工具栏的 `Format` 按钮
3. 检查:
   - [ ] 代码自动格式化
   - [ ] 缩进正确
   - [ ] 空格正确

#### ✅ 保存功能测试
1. 修改脚本内容（例如改变文本）
2. 点击 `Save` 按钮
3. 检查:
   - [ ] 显示 "Script saved" 提示
   - [ ] 关闭编辑器后重新打开，修改已保存

#### ✅ 创建新脚本测试
1. 点击左侧的 `+ New Script` 按钮
2. 输入控件ID: `label1`
3. 检查:
   - [ ] 脚本列表中出现 `label1.ts`
   - [ ] 自动打开并显示模板代码
   - [ ] 模板包含onClick和onHover方法

#### ✅ 删除脚本测试
1. 确保已选中一个脚本
2. 点击 `Delete` 按钮
3. 确认删除
4. 检查:
   - [ ] 脚本从列表中消失
   - [ ] 编辑器清空

#### ✅ 验证功能测试
1. 确保脚本没有错误
2. 点击 `Validate` 按钮
3. 检查:
   - [ ] 显示 "No errors found!" 提示

4. 添加错误代码后再次验证
5. 检查:
   - [ ] 显示错误列表对话框
   - [ ] 包含行号和错误信息

#### ✅ 重载类型定义测试
1. 点击 `Reload Types` 按钮
2. 检查:
   - [ ] 控制台显示 "Types loaded successfully"
   - [ ] 智能提示继续工作

### 4. 开发者工具检查

如果遇到问题，打开开发者工具：

1. 在脚本编辑器窗口中按 `F12` 或 `Ctrl+Shift+I`
2. 检查Console标签：
   - [ ] 应该看到 "Monaco Editor loaded"
   - [ ] 应该看到 "Script Editor initialized"
   - [ ] 应该看到 "Types loaded successfully"
   - [ ] 不应该有红色错误信息

### 5. 常见问题排查

#### Monaco未加载
**症状**: 编辑器区域空白
**解决**:
```bash
cd frontend
npm install
```

#### 类型定义未加载
**症状**: 没有智能提示
**解决**:
1. 检查 `frontend/scripts/ui_types.d.ts` 是否存在
2. 点击 `Reload Types` 按钮
3. 查看控制台是否有错误

#### 文件操作失败
**症状**: 无法保存或打开文件
**解决**:
1. 检查 `frontend/scripts/` 目录是否存在
2. 查看主进程的控制台输出（启动Electron的终端）
3. 检查文件权限

### 6. 性能测试

#### 大文件测试
1. 创建一个包含500行代码的脚本
2. 检查:
   - [ ] 编辑器响应流畅
   - [ ] 智能提示延迟 < 500ms
   - [ ] 滚动流畅

#### 多脚本测试
1. 创建10个不同的脚本
2. 快速切换脚本
3. 检查:
   - [ ] 切换流畅无卡顿
   - [ ] 每个脚本内容正确显示

### 7. 集成测试

#### 与UI设计器集成
1. 在主窗口（UI设计器）打开一个项目
2. 打开脚本编辑器
3. 编辑脚本
4. 保存脚本
5. 在主窗口预览UI
6. 检查:
   - [ ] 脚本功能正常工作
   - [ ] UI响应脚本事件

### 8. 成功标准

所有以上测试项应该：
- ✅ 功能正常工作
- ✅ 无JavaScript错误
- ✅ 智能提示准确
- ✅ 性能流畅

### 9. 截图位置

建议截图保存位置：
- `implementation/screenshots/phase6/`

应包含的截图：
1. `01-script-editor-overview.png` - 编辑器整体界面
2. `02-intellisense-demo.png` - 智能提示演示
3. `03-error-detection.png` - 错误检测演示
4. `04-script-list.png` - 脚本列表
5. `05-menu-integration.png` - 菜单集成

### 10. 测试报告模板

```markdown
# Phase 6 测试报告

## 测试环境
- 系统: Windows 11
- Electron: 28.0.0
- Monaco Editor: 0.45.0
- 测试日期: 2024-XX-XX

## 测试结果
- [ ] 所有基本功能正常
- [ ] 智能提示工作正常
- [ ] 错误检查正常
- [ ] 文件操作正常
- [ ] 性能流畅

## 发现的问题
1. 问题描述
   - 重现步骤
   - 预期行为
   - 实际行为

## 建议改进
1. 改进建议

## 总体评价
- 功能完整性: [优秀/良好/一般/差]
- 用户体验: [优秀/良好/一般/差]
- 性能表现: [优秀/良好/一般/差]
```

## 下一步

测试通过后，可以进入Phase 7：
- 编写自动化测试
- 性能优化
- 用户文档完善
