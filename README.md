# EbitenStudio

åŸºäº Electron + Go (Ebiten) çš„å¯è§†åŒ– UI ç¼–è¾‘å™¨

> ğŸ¨ **å¯è§†åŒ–ç¼–è¾‘** + ğŸš€ **åŸç”Ÿæ¸²æŸ“** + ğŸ“œ **TypeScript è„šæœ¬** = é«˜æ•ˆçš„ UI è®¾è®¡å·¥ä½œæµ

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ–±ï¸ **æ‰€è§å³æ‰€å¾—**: æ‹–æ‹½å¼ UI è®¾è®¡ï¼Œå®æ—¶é¢„è§ˆ
- ğŸ¯ **TypeScript è„šæœ¬**: å®Œæ•´çš„äº‹ä»¶å¤„ç†å’Œè„šæœ¬ç³»ç»Ÿ
- âš¡ **åŸç”Ÿæ€§èƒ½**: åŸºäº Ebiten v2 æ¸¸æˆå¼•æ“ï¼Œé«˜æ€§èƒ½æ¸²æŸ“
- ğŸ“¦ **èµ„æºç®¡ç†**: å›¾ç‰‡ã€å­—ä½“èµ„æºä¸€ç«™å¼ç®¡ç†
- ğŸ”„ **çƒ­é‡è½½**: ç¼–è¾‘å³é¢„è§ˆï¼Œå¿«é€Ÿè¿­ä»£
- ğŸ¨ **ä¸°å¯Œç»„ä»¶**: Buttonã€Labelã€TextInputã€Panelã€Imageã€CheckBox ç­‰
- ğŸ“ **ç²¾ç¡®å¸ƒå±€**: Padding/Margin/Border å®Œæ•´æ”¯æŒ
- ğŸ’¾ **å¤šæ ¼å¼å¯¼å‡º**: .ebiten é¡¹ç›®æ–‡ä»¶ + .ui/.pak è¿è¡Œæ—¶èµ„æºåŒ…

## ğŸ—ï¸ æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Electron ç¼–è¾‘å™¨              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å·¥å…·æ      â”‚   å±æ€§é¢æ¿      â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚   HTML Canvas ç¼–è¾‘åŒº          â”‚  â”‚
â”‚  â”‚   (å¯è§†åŒ–æ‹–æ‹½ç¼–è¾‘)            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚   TypeScript è„šæœ¬ç¼–è¾‘å™¨       â”‚  â”‚
â”‚  â”‚   (äº‹ä»¶å¤„ç†å’Œé€»è¾‘)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  é¢„è§ˆæŒ‰é’® â†’ å¯åŠ¨ Go Viewer         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Go Viewer (ç‹¬ç«‹è¿›ç¨‹)          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚  Ebiten æ¸²æŸ“å¼•æ“            â”‚ â”‚
â”‚    â”‚  + UI è¿è¡Œæ—¶åº“              â”‚ â”‚
â”‚    â”‚  + Goja è„šæœ¬å¼•æ“            â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  åŠ è½½ .ui + .pak + ç¼–è¯‘åçš„ .js   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **ç¼–è¾‘å™¨**: Electron + Vanilla JS + HTML Canvas
- **è„šæœ¬ç³»ç»Ÿ**: TypeScript â†’ JavaScript (CommonJS)
- **é¢„è§ˆå™¨**: Go 1.21+ + Ebiten v2
- **è„šæœ¬å¼•æ“**: Goja (Pure Go JavaScript VM)
- **UIè¿è¡Œæ—¶**: Go + Ebiten (å¯ç‹¬ç«‹ä½¿ç”¨)
- **é€šä¿¡**: IPC (Electron è¿›ç¨‹é—´é€šä¿¡)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windows

```powershell
# ä¸€é”®æ„å»ºå’Œå¯åŠ¨
.\build.ps1
```

### Linux/macOS

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x build.sh

# ä¸€é”®æ„å»ºå’Œå¯åŠ¨
./build.sh
```

### æ‰‹åŠ¨æ­¥éª¤

1. **å®‰è£…å‰ç«¯ä¾èµ–**
```bash
cd frontend
npm install
```

2. **è¿è¡Œç¼–è¾‘å™¨**
```bash
npm start
```

3. **æ„å»ºé¢„è§ˆå™¨**ï¼ˆå¯é€‰ï¼Œé¦–æ¬¡ä½¿ç”¨éœ€è¦ï¼‰
```bash
cd ui/examples/viewer
go build -o viewer.exe  # Windows
go build -o viewer      # Linux/macOS
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
EbitenStudio/
â”œâ”€â”€ frontend/              # Electron ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ js/            # ç¼–è¾‘å™¨æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/   # Widget ç±»ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ app.js           # åº”ç”¨ä¸»é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ canvas-renderer.js  # Canvas æ¸²æŸ“å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ preview.js        # é¢„è§ˆå’Œå¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ resource-manager.js # èµ„æºç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ properties.js     # å±æ€§ç¼–è¾‘å™¨
â”‚   â”‚   â””â”€â”€ styles/        # CSS æ ·å¼
â”‚   â”œâ”€â”€ main.js            # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ preload.js         # IPC é€šä¿¡æ¡¥æ¥
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ui/                    # Go UI è¿è¡Œæ—¶åº“
â”‚   â”œâ”€â”€ *.go               # Widget å®ç° (Button/Label/Panel ç­‰)
â”‚   â”œâ”€â”€ loader.go          # .ui/.pak åŠ è½½å™¨
â”‚   â”œâ”€â”€ renderer.go        # Ebiten æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ script_engine.go   # Goja è„šæœ¬å¼•æ“
â”‚   â”œâ”€â”€ script_api.go      # è„šæœ¬ API (console/RootElement)
â”‚   â”œâ”€â”€ event_queue.go     # äº‹ä»¶é˜Ÿåˆ—
â”‚   â”œâ”€â”€ command_queue.go   # å‘½ä»¤é˜Ÿåˆ—
â”‚   â”œâ”€â”€ ui_tree.go         # UI æ ‘ç»“æ„
â”‚   â”œâ”€â”€ typescript_generator.go  # TypeScript ç±»å‹ç”Ÿæˆå™¨
â”‚   â””â”€â”€ examples/
â”‚       â””â”€â”€ viewer/        # é¢„è§ˆå™¨åº”ç”¨
â”‚           â””â”€â”€ main.go
â”‚
â”œâ”€â”€ scripts_example/       # TypeScript è„šæœ¬ç¤ºä¾‹
â”‚   â”œâ”€â”€ ui_types.d.ts      # UI ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ tsconfig.json      # TypeScript é…ç½®
â”‚   â””â”€â”€ *.ts               # ç¤ºä¾‹è„šæœ¬
â”‚
â”œâ”€â”€ build.ps1 / build.sh   # æ„å»ºè„šæœ¬
â”œâ”€â”€ git-init.ps1 / git-init.sh  # Git åˆå§‹åŒ–è„šæœ¬
â””â”€â”€ README.md

```

## ğŸ“š ä½¿ç”¨æŒ‡å—

### åˆ›å»º UI

1. å¯åŠ¨ç¼–è¾‘å™¨ï¼ˆè¿è¡Œ `npm start`ï¼‰
2. ä»å·¥å…·æ æ‹–æ‹½ç»„ä»¶åˆ°ç”»å¸ƒ
3. åœ¨å±æ€§é¢æ¿è°ƒæ•´æ ·å¼å’Œå¸ƒå±€
4. ç‚¹å‡»"é¢„è§ˆ"æŒ‰é’®æŸ¥çœ‹æ•ˆæœ

### ç¼–å†™è„šæœ¬

1. åœ¨é¡¹ç›®ç›®å½•åˆ›å»º `scripts/` æ–‡ä»¶å¤¹
2. åˆ›å»º TypeScript è„šæœ¬æ–‡ä»¶ï¼ˆå¦‚ `button1.ts`ï¼‰
3. å®šä¹‰äº‹ä»¶å¤„ç†å™¨ï¼š
```typescript
const button1 = {
    onClick(self: UIButton, event: ButtonClickEvent) {
        console.log('Button clicked!');
        self.setText('Clicked!');
    }
};
export default button1;
```
4. åœ¨ç¼–è¾‘å™¨ä¸­ä¸ºç»„ä»¶ç»‘å®šè„šæœ¬
5. é¢„è§ˆæ—¶è„šæœ¬å°†è‡ªåŠ¨ç¼–è¯‘å¹¶æ‰§è¡Œ

### å¯¼å‡ºé¡¹ç›®

- **ä¿å­˜é¡¹ç›®**: æ–‡ä»¶ â†’ ä¿å­˜é¡¹ç›® (.ebiten)
- **å¯¼å‡ºè¿è¡Œæ—¶**: æ–‡ä»¶ â†’ å¯¼å‡º UI (.ui + .pak)

## ğŸ”§ å¼€å‘è¦æ±‚

- **Node.js** 18+ (å‰ç«¯ç¼–è¾‘å™¨)
- **Go** 1.21+ (UI è¿è¡Œæ—¶å’Œé¢„è§ˆå™¨)
- **TypeScript** (npm install è‡ªåŠ¨å®‰è£…)
- **æ“ä½œç³»ç»Ÿ**: Windows / Linux / macOS

## ğŸ“– æ–‡æ¡£

- [FILE_SYSTEM_ARCHITECTURE.md](FILE_SYSTEM_ARCHITECTURE.md) - æ–‡ä»¶ç³»ç»Ÿæ¶æ„
- [SCRIPT_SYSTEM_DESIGN.md](SCRIPT_SYSTEM_DESIGN.md) - è„šæœ¬ç³»ç»Ÿè®¾è®¡
- [INTEGRATION_GUIDE.md](INTEGRATION_GUIDE.md) - é›†æˆæŒ‡å—
- [TESTING_GUIDE.md](TESTING_GUIDE.md) - æµ‹è¯•æŒ‡å—
- [implementation/](implementation/) - å®ç°æ–‡æ¡£

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
- ğŸ“… **ä»£ç ç”Ÿæˆ**: ç”Ÿæˆ Go ä»£ç 
- ğŸ“… **ä¸»é¢˜ç³»ç»Ÿ**: UI ä¸»é¢˜å’Œæ ·å¼ç®¡ç†
- ğŸ“… **åŠ¨ç”»ç³»ç»Ÿ**: è¡¥é—´åŠ¨ç”»å’Œæ—¶é—´è½´
- ğŸ“… **å¤šè¯­è¨€æ”¯æŒ**: i18n å›½é™…åŒ–

## é¡¹ç›®ç»“æ„

```
EbitenStudio/
â”œâ”€â”€ frontend/         # Electron ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ js/       # ç¼–è¾‘å™¨é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ widgets/  # Widgetç±»ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”œâ”€â”€ app.js
â”‚   â”‚   â”‚   â”œâ”€â”€ canvas-renderer.js
â”‚   â”‚   â”‚   â”œâ”€â”€ preview.js
â”‚   â”‚   â”‚   â””â”€â”€ resource-manager.js
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ package.json
â””â”€â”€ ui/               # Go UI è¿è¡Œæ—¶åº“
    â”œâ”€â”€ *.go          # Widgetå®ç°
    â”œâ”€â”€ loader.go     # JSON/PakåŠ è½½å™¨
    â”œâ”€â”€ renderer.go   # Ebitenæ¸²æŸ“å™¨
    â””â”€â”€ examples/
        â””â”€â”€ viewer/   # é¢„è§ˆå™¨åº”ç”¨
            â””â”€â”€ main.go
```

## å¼€å‘è¯´æ˜

### è¿è¡Œè¦æ±‚

- Node.js 18+
- Go 1.21+ (ç”¨äºé¢„è§ˆå’Œæ‰“åŒ…)
- Windows/Linux/macOS

### å·¥ä½œæµç¨‹

1. **ç¼–è¾‘UI**: 
   - åœ¨ Electron ç¼–è¾‘å™¨ä¸­è®¾è®¡ç•Œé¢
   - ä½¿ç”¨ HTML Canvas å®æ—¶é¢„è§ˆ

2. **é¢„è§ˆæ•ˆæœ**: 
   - ç‚¹å‡» "â–¶ï¸ é¢„è§ˆ" æŒ‰é’®
   - è‡ªåŠ¨å¯åŠ¨ Go Viewer æŸ¥çœ‹å®é™…æ¸²æŸ“æ•ˆæœ

3. **å¯¼å‡ºå‘å¸ƒ**: 
   - ç‚¹å‡» "ğŸ’¾ å¯¼å‡º" æŒ‰é’®
   - ç”Ÿæˆ .ui + .pak èµ„æºåŒ…

4. **æ¸¸æˆé›†æˆ**: 
   - åœ¨ Go æ¸¸æˆä¸­å¼•ç”¨ ui åº“
   - åŠ è½½å¯¼å‡ºçš„ .ui æ–‡ä»¶

### æ¶æ„ç‰¹ç‚¹

- **åˆ†ç¦»å¼è®¾è®¡**: ç¼–è¾‘å™¨å’Œé¢„è§ˆå™¨ç‹¬ç«‹è¿è¡Œ
- **æ‰€è§å³æ‰€å¾—**: Viewer ä½¿ç”¨ Ebiten æ¸²æŸ“ï¼Œä¸æ¸¸æˆè¿è¡Œæ—¶ä¸€è‡´
- **èµ„æºæ‰“åŒ…**: .pak æ ¼å¼æ•´åˆæ‰€æœ‰èµ„æºï¼Œä¾¿äºå‘å¸ƒ
- **è·¨å¹³å°**: Electron å’Œ Ebiten å‡æ”¯æŒå¤šå¹³å°

## License

MIT
